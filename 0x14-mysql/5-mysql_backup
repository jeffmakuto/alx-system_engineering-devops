#!/usr/bin/env bash

# Check if the correct number of arguments is provided
if [ "$#" -ne 1 ]; then
    echo "Usage: $0 <mysql_password>"
    exit 1
fi

# MySQL database credentials
mysql_user="root"
mysql_password="$1"

# Get the current date in the required format (day-month-year)
current_date=$(date +'%d-%m-%Y')

# Create a MySQL dump file and compress it into a tar.gz archive
mysqldump -u "$mysql_user" -p"$mysql_password" --all-databases | gzip > "$current_date.tar.gz"

# Exit if mysqldump or compression fails
if [ $? -ne 0 ]; then
    echo "Error: MySQL dump or compression failed."
    exit 1
fi
